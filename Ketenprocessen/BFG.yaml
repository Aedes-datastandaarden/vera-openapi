openapi: '3.0.0'
info:
  title: 'VERA-BFG'
  description: API-specificatie van ketenproces "Beheer Financiele Gegevens". Deze specificatie is gebaseerd op VERA versie 4.0
  termsOfService: 'https://www.stichting-vera.nl/voorwaarden/'
  contact:
    name: 'VERA'
    url: 'https://cora.wikixl.nl/index.php/VERA_Standaard'
    email: 'info@stichting-vera.nl'
  license:
    name: European Union Public License, version 1.2 (EUPL-1.2)
    url: https://eupl.eu/1.2/nl/
  version: '1.0'
servers:
  - url: https://bfg.vera.io:{port}/{basePath}
    description: 'Productieserver'
    variables:
       port:
         enum:
           - '8443'
           - '443'
         default: '443'
       basePath:
         default: v1
tags:
- name: 'Boekingen'
  description: 'Operaties met betrekking tot boekingen'
- name: 'Debiteuren'
  description: 'Operaties met betrekking tot debiteuren'
paths:
  /boekingen:
    get:
      tags:
      - 'Boekingen'
      description: 'Ophalen van Boekingen'
      operationId: 'listBoekingen'
      parameters:
      - name: 'params'
        in: 'query'
        style: 'form'
        explode: true
        schema:
          $ref: '#/components/schemas/Boekingen-Boeking'
      responses:
        '200':
          description: 'Boeking response'
          content:
            'application/json':
              schema:
                type: 'array'
                items:
                  $ref: '#/components/schemas/Boekingen-Boeking'
        '401':
           $ref: '#/components/responses/NietGeautoriseerd'
        default:
          description: 'Onverwachte fout'
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/Foutbericht'
    post:
      tags:
      - 'Boekingen'
      description: 'Voegt een nieuw(e) Boeking toe.'
      operationId: 'createBoeking'
      requestBody:
        description: 'Boeking om toe te voegen'
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Boekingen-Boeking'
      responses:
        '401':
           $ref: '#/components/responses/NietGeautoriseerd'
        '405':
          description: 'Foutieve invoer'
  /boekingen/{id}:
    get:
      tags:
      - 'Boekingen'
      description: 'Retourneert een Boeking met de gegeven identifier'
      operationId: 'readBoeking'
      parameters:
      - name: 'id'
        in: 'path'
        description: 'Id van Boeking om op te halen'
        required: true
        schema:
          type: 'string'
      responses:
        '200':
          description: 'Boeking response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Boekingen-Boeking'
        '401':
           $ref: '#/components/responses/NietGeautoriseerd'
        default:
          description: 'Onverwachte fout'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Foutbericht'
    put:
      tags:
      - 'Boekingen'
      description: 'Vervangen van een Boeking'
      operationId: 'replaceBoeking'
      parameters:
      - name: 'id'
        in: 'path'
        description: 'Id van Boeking om te vervangen'
        required: true
        schema:
          type: 'string'
      requestBody:
        description: 'Boeking om te vervangen'
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Boekingen-Boeking'
      responses:
        '200':
          description: 'Boeking succesvol vervangen'
        '401':
           $ref: '#/components/responses/NietGeautoriseerd'
        default:
          description: 'Onverwachte fout'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Foutbericht'
    patch:
      tags:
      - 'Boekingen'
      description: 'Wijzigen van een Boeking'
      operationId: 'updateBoeking'
      parameters:
      - name: 'id'
        in: 'path'
        description: 'Id van Boeking om te wijzigen'
        required: true
        schema:
          type: 'integer'
      requestBody:
        description: 'Boeking om te wijzigen'
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Boekingen-Boeking'
      responses:
        '200':
          description: 'Boeking succesvol gewijzigd'
        '401':
           $ref: '#/components/responses/NietGeautoriseerd'
        default:
          description: 'Onverwachte fout'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Foutbericht'
  /debiteuren:
    get:
      tags:
      - 'Debiteuren'
      description: 'Ophalen van Debiteuren'
      operationId: 'listDebiteuren'
      parameters:
      - name: 'params'
        in: 'query'
        style: 'form'
        explode: true
        schema:
          $ref: '#/components/schemas/Debiteuren-Debiteur'
      responses:
        '200':
          description: 'Debiteur response'
          content:
            'application/json':
              schema:
                type: 'array'
                items:
                  $ref: '#/components/schemas/Debiteuren-Debiteur'
        '401':
           $ref: '#/components/responses/NietGeautoriseerd'
        default:
          description: 'Onverwachte fout'
          content:
            'application/json':
              schema:
                $ref: '#/components/schemas/Foutbericht'
    post:
      tags:
      - 'Debiteuren'
      description: 'Voegt een nieuw(e) Debiteur toe.'
      operationId: 'createDebiteur'
      requestBody:
        description: 'Debiteur om toe te voegen'
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Debiteuren-Debiteur'
      responses:
        '401':
           $ref: '#/components/responses/NietGeautoriseerd'
        '405':
          description: 'Foutieve invoer'
  /debiteuren/{id}:
    get:
      tags:
      - 'Debiteuren'
      description: 'Retourneert een Debiteur met de gegeven identifier'
      operationId: 'readDebiteur'
      parameters:
      - name: 'id'
        in: 'path'
        description: 'Id van Debiteur om op te halen'
        required: true
        schema:
          type: 'string'
      responses:
        '200':
          description: 'Debiteur response'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Debiteuren-Debiteur'
        '401':
           $ref: '#/components/responses/NietGeautoriseerd'
        default:
          description: 'Onverwachte fout'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Foutbericht'
    put:
      tags:
      - 'Debiteuren'
      description: 'Vervangen van een Debiteur'
      operationId: 'replaceDebiteur'
      parameters:
      - name: 'id'
        in: 'path'
        description: 'Id van Debiteur om te vervangen'
        required: true
        schema:
          type: 'string'
      requestBody:
        description: 'Debiteur om te vervangen'
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Debiteuren-Debiteur'
      responses:
        '200':
          description: 'Debiteur succesvol vervangen'
        '401':
           $ref: '#/components/responses/NietGeautoriseerd'
        default:
          description: 'Onverwachte fout'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Foutbericht'
    patch:
      tags:
      - 'Debiteuren'
      description: 'Wijzigen van een Debiteur'
      operationId: 'updateDebiteur'
      parameters:
      - name: 'id'
        in: 'path'
        description: 'Id van Debiteur om te wijzigen'
        required: true
        schema:
          type: 'integer'
      requestBody:
        description: 'Debiteur om te wijzigen'
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/Debiteuren-Debiteur'
      responses:
        '200':
          description: 'Debiteur succesvol gewijzigd'
        '401':
           $ref: '#/components/responses/NietGeautoriseerd'
        default:
          description: 'Onverwachte fout'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Foutbericht'
security:
  - ApiKeyAuth: []
components:
  headers:
    X-Stuurgegevens-TijdstipBericht:
      schema:
        type: string
        format: data-time
        description: Tijdstip waarop het bericht verzonden is
    X-Stuurgegevens-Referentienummer:
      schema:
        type: string
        format: any
        description: Een unieke code voor correlatie
    X-Stuurgegevens-Zender-Organisatie:
      schema:
        type: string
        format: any
        description: Naam van de verzendende organisatie
    X-Stuurgegevens-Zender-Administratie:
      schema:
        type: string
        format: any
        description: |
          Met het stuurgegeven Administratie kan onderscheid gemaakt worden tussen 
          de verschillende gegevensverzamelingen die de verzendende organisatie beheert
    X-Parameters-Aantal:
      schema:
        type: integer
        description: Totaal aantal gevonden entiteiten
        example: 135
    X-Parameters-AantalPerPagina:
      schema:
        type: integer
        description: Miximum aantal entiteiten per pagina
        example: 20
    X-Parameters-Pagina:
      schema:
        type: integer
        description: Huidige paginanummer
        example: 3
    X-Parameters-PeiltijdstipMaterieel:
      schema:
        type: string
        format: date-time
        description: De peildatum. Indien leeg worden de actuele gegevens opgevraagd
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: X-API-KEY
  responses:
    NietGeautoriseerd:
      description: API-key ontbreekt of is ongeldig
      headers:
        X-API-KEY:
          schema:
            type: string
  schemas:
    Boekingen-Aflettering:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van het gegeven in het bronsysteem'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken)'
        omschrijving:
          type: 'string'
          format: 'any'
          description: 'Omschrijving van het gegeven.'
        datum:
          type: 'string'
          format: 'date'
          description: 'Datum waarop de aflettering heeft plaatsgevonden.'
        bedrag:
          type: 'number'
          format: 'float'
          description: 'Het afgeletterde bedrag.'
        huurBoeking:
          $ref: '#/components/schemas/Boeking-sleutels'
          description: 'Boeking die ten grondslag ligt aan de aflettering.'
        tegenHuurBoeking:
          $ref: '#/components/schemas/Boeking-sleutels'
          description: 'Boeking waarop is afgeletterd.'
    Boeking-sleutels:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van het gegeven in het bronsysteem'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken)'
    Boekingen-Betaalgegeven:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van het gegeven in het bronsysteem'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken)'
        soort:
          $ref: '#/components/schemas/Referentiedata'
          description: 'Het soort betaalgegeven (bijvoorbeeld een bankrekening, paypall etc.).'
        relatie:
          $ref: '#/components/schemas/Relatie-sleutels'
          description: 'De relatie behorend bij het betaalgegeven.'
        incassowijze:
          $ref: '#/components/schemas/Referentiedata'
          description: 'De standaard incassowijze voor het betaalgegeven.'
    Referentiedata:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van de referentiedata of klasse'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken) Bijvoorbeeld NL.'
        soort:
          $ref: '#/components/schemas/Referentiedata'
          description: 'De soort van het referentiedata item. Bijvoorbeeld nationaliteit.'
        naam:
          type: 'string'
          format: 'any'
          description: 'De te tonen waarde van het referentiedata item. Bijvoorbeeld Nederlandse.'
        omschrijving:
          type: 'string'
          format: 'any'
          description: 'De omschrijving van de referentiedata. Bijvoorbeeld De Nederlandse nationaliteit.'
        parent:
          $ref: '#/components/schemas/Referentiedata-sleutels'
          description: 'De bovenliggende referentiedata in het geval er sprake is van een hierarchische relatie tussen referentiedata.'
        begindatum:
          type: 'string'
          format: 'date'
          description: 'De begindatum van het klasse item.'
        einddatum:
          type: 'string'
          format: 'date'
          description: 'De einddatum van het klasse item.'
        sortering:
          type: 'string'
          format: 'any'
          description: 'De sorteervolgorde van de referentiedata anders dan alfabetisch.'
    Referentiedata-sleutels:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van de referentiedata of klasse'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken) Bijvoorbeeld NL.'
        naam:
          type: 'string'
          format: 'any'
          description: 'De te tonen waarde van het referentiedata item. Bijvoorbeeld Nederlandse.'
    Relatie-sleutels:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van het gegeven in het bronsysteem'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken)'
        soort:
          $ref: '#/components/schemas/Referentiedata'
          description: 'Het soort relatie: NatuurlijkPersoon, Relatiegroep of Rechtspersoon.'
    Boekingen-Boeking:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van het gegeven in het bronsysteem'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken)'
        soort:
          $ref: '#/components/schemas/Referentiedata'
          description: 'Soort boeking. Bijvoorbeeld;vordering, ontvangst of uitbetaling. Boekingsoorten en boekingdetailsoorten kunnen in allerlei combinaties voorkomen;er is geen vaste hiërarchie. '
        detailSoort:
          $ref: '#/components/schemas/Referentiedata'
          description: 'Detaillering van het soort boeking. Bijvoorbeeld;storno, kasbetaling, acceptgiro, enzovoort. Boekingsoorten en boekingdetailsoorten kunnen in allerlei combinaties voorkomen;er is geen vaste hiërarchie. '
        omschrijving:
          type: 'string'
          format: 'any'
          description: 'Omschrijving van de boeking.'
        status:
          $ref: '#/components/schemas/Referentiedata'
          description: 'Status van de boeking. Bijvoorbeeld;voorlopig, gefiatteerd. '
        boekdatum:
          type: 'string'
          format: 'date'
          description: 'De datum waarmee de mutatie in de boekhouding wordt ingeboekt.'
        factuurdatum:
          type: 'string'
          format: 'date'
          description: 'Boekstuk- of factuurdatum van de boeking.'
        vervaldatum:
          type: 'string'
          format: 'date'
          description: 'Vervaldatum van de boeking.'
        debiteur:
          $ref: '#/components/schemas/Boekingen-Debiteur'
          description: 'De debiteur van de boeking.'
        bedrag:
          type: 'number'
          format: 'float'
          description: 'Het initiele bedrag van de boeking (inclusief btw).'
        saldo:
          type: 'number'
          format: 'float'
          description: 'Het saldo of openstaande bedrag van de boeking.'
        betaalgegeven:
          $ref: '#/components/schemas/Boekingen-Betaalgegeven'
          description: 'Betaalgegeven (rekeningnummer) van de gekoppelde relatie.'
        externeIncasso:
          type: 'string'
          format: 'uri'
          description: 'Referentie naar ExterneIncasso in de vorm: vera/v4/externeincassos/12345'
        betalingskenmerk:
          type: 'string'
          format: 'any'
          description: 'Betalingskenmerk van bijvoorbeeld acceptgiro of kwitantienummer.'
        huurgeschil:
          type: 'string'
          format: 'uri'
          description: 'Referentie naar Huurgeschil in de vorm: vera/v4/huurgeschillen/12345'
        betalingsregeling:
          type: 'string'
          format: 'uri'
          description: 'Referentie naar Betalingsregeling in de vorm: vera/v4/betalingsregelingen/12345'
        btwBedrag:
          type: 'number'
          format: 'float'
          description: 'Totaal Bedrag btw.'
        overeenkomst:
          type: 'string'
          format: 'uri'
          description: 'Referentie naar Overeenkomst in de vorm: vera/v4/overeenkomsten/12345'
        incassoOpdracht:
          $ref: '#/components/schemas/Boekingen-IncassoOpdracht'
          description: 'Incasso opdracht waar de boeking aan gekoppeld is.'
        boekingDetails:
          description: 'De boekingdetails behorende bij de boeking.'
          type: array
          items:
            $ref: '#/components/schemas/Boekingen-BoekingDetail'
        afletteringen:
          description: 'De afletteringen behorende bij de boeking.'
          type: array
          items:
            $ref: '#/components/schemas/Boekingen-Aflettering'
        extra-attributen:
          description: 'Toegevoegde sleutel/waarde-paren'
          type: array
          items:
            $ref: '#/components/schemas/ExtraAttributen'
    Boekingen-BoekingDetail:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van het gegeven in het bronsysteem'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken)'
        omschrijving:
          type: 'string'
          format: 'any'
          description: 'Omschrijving van het gegeven.'
        bedrag:
          type: 'number'
          format: 'float'
          description: 'Bedrag'
    Boekingen-BtwTarief:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van het gegeven in het bronsysteem'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken)'
        omschrijving:
          type: 'string'
          format: 'any'
          description: 'Omschrijving van het tarief, bijvoorbeeld;hoog, laag, geen, nul. '
        begindatum:
          type: 'string'
          format: 'date'
          description: 'Datum waarop het tarief voorhet type ingaat.'
        einddatum:
          type: 'string'
          format: 'date'
          description: 'Datum waarop het tarief voorhet type eindigt.'
        percentage:
          type: 'number'
          format: 'float'
          description: 'Het btw percentage van het tarief.'
    Boekingen-Debiteur:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van het gegeven in het bronsysteem'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken)'
        soort:
          $ref: '#/components/schemas/Referentiedata'
          description: 'Soort debiteur: huurder, gemeente, etc.'
        status:
          $ref: '#/components/schemas/Referentiedata'
          description: 'Status van de debiteur, bijvoorbeeld;geblokkeerd, alleen voor betalen, etc. '
        relatie:
          $ref: '#/components/schemas/Relatie-sleutels'
          description: 'Relatie gekoppeld aan de debiteur.'
        extra-attributen:
          description: 'Toegevoegde sleutel/waarde-paren'
          type: array
          items:
            $ref: '#/components/schemas/ExtraAttributen'
    Boekingen-IncassoOpdracht:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van het gegeven in het bronsysteem'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken)'
        plandatum:
          type: 'string'
          format: 'date'
          description: 'Plandatum van afschrijven'
    Debiteuren-Debiteur:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van het gegeven in het bronsysteem'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken)'
        soort:
          $ref: '#/components/schemas/Referentiedata'
          description: 'Soort debiteur: huurder, gemeente, etc.'
        toelichting:
          type: 'string'
          format: 'any'
          description: 'Nadere omschrijving van het gegegeven (memo).'
        status:
          $ref: '#/components/schemas/Referentiedata'
          description: 'Status van de debiteur, bijvoorbeeld;geblokkeerd, alleen voor betalen, etc. '
        vervaltermijn:
          type: 'integer'
          format: 'int32'
          description: 'Standaard vervaltermijn voor uit te sturen facturen in dagen.'
        relatie:
          $ref: '#/components/schemas/Relatie-sleutels'
          description: 'Relatie gekoppeld aan de debiteur.'
        kortingsdagen:
          type: 'integer'
          format: 'int32'
          description: 'Aantal dagen waarin de debiteur de korting van het factuurbedrag mag aftrekken.'
        btwPlichtig:
          type: 'boolean'
          format: 'true-or-false'
          description: 'Geeft aan of de debiteur btw plichtig is ja/nee.'
        saldo:
          type: 'number'
          format: 'float'
          description: 'Openstaand saldo.'
        incassomachtiging:
          $ref: '#/components/schemas/Debiteuren-Incassomachtiging'
          description: 'De incassomachtiging van de debiteur.'
        extra-attributen:
          description: 'Toegevoegde sleutel/waarde-paren'
          type: array
          items:
            $ref: '#/components/schemas/ExtraAttributen'
    Debiteuren-Incassomachtiging:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van het gegeven in het bronsysteem'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken)'
        soort:
          $ref: '#/components/schemas/Referentiedata'
          description: 'Soort machtiging: doorlopend/eenmalig.'
        machtigingsnummer:
          type: 'string'
          format: 'any'
          description: 'Het nummer van de machtiging'
        afgiftedatum:
          type: 'string'
          format: 'date'
          description: 'De afgiftedatum van de machtiging'
        rekening:
          $ref: '#/components/schemas/Betaalgegeven-sleutels'
          description: 'De BIC kode van de bank van de debiteur'
    Betaalgegeven-sleutels:
      type: object
      properties:
        id:
          type: 'string'
          format: 'any'
          description: 'De primaire sleutel van het gegeven in het bronsysteem'
        code:
          type: 'string'
          format: 'any'
          description: 'De unieke code (Bijvoorbeeld om te tonen of te zoeken)'
        rekeningnummer:
          type: 'string'
          format: 'any'
          description: 'Het rekeningnummer.'
        iban:
          type: 'string'
          format: 'any'
          description: 'Het International Bank Account Number. Identificeert elke rekeninghouder, inclusief bank en vestigingsland.'
    Foutbericht:
      type: 'object'
      properties:
        code:
          type: 'string'
        omschrijving:
          type: 'string'
    ExtraAttributen:
      type: 'object'
      properties:
        sleutel:
          type: 'string'
        waarde:
          type: 'string'

